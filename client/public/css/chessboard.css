/**
 * CSS codes of Chessboard.
 * @see For more information, check file: src\Chess\Board\Chessboard.ts
 */

:root{
    /**
     * All sizes are will be calculated based on the board size.
     * For example, if the board size is 800px, the square size will be 100px(1/8 of the board size),
     * font size will be 16px(1/50 of the board size), and the piece size will be 80px(1/10 of the board size).
     */
    --board-size: 70vh;

    /* Colors */
    --white-square-color: #879A86;
    --black-square-color: #647A65;
    --square-shadow-color: none;
    --clicked-color: #000;

    /* Promotion Menu */
    --promotion-option-color: #D3D3D3;
    --promotion-option-hover-color: #B7B7B7;

    /* Effects */
    --selected-color: #57CE9240;
    --preselected-color: #57CE9240;
    --playable-color: #57CE92;
    --preplayable-color: #888888;
    --killable-color: #57CE92;
    --prekillable-color: #888888;
    --checked-color: #DF3030;
    --disabled-color: #0000004F;
    --hovering-color: #246d49;
    --prehovering-color: #888888;
    --from-color: #45C9FF63;
    --to-color: #45C9FF63;

    /* White Pieces */
    --white-pawn-image: url("../assets/pieces/white_pawn.svg");
    --white-rook-image: url("../assets/pieces/white_rook.svg");
    --white-knight-image: url("../assets/pieces/white_knight.svg");
    --white-bishop-image: url("../assets/pieces/white_bishop.svg");
    --white-queen-image: url("../assets/pieces/white_queen.svg");
    --white-king-image: url("../assets/pieces/white_king.svg");

    /* Black Pieces */
    --black-pawn-image: url("../assets/pieces/black_pawn.svg");
    --black-rook-image: url("../assets/pieces/black_rook.svg");
    --black-knight-image: url("../assets/pieces/black_knight.svg");
    --black-bishop-image: url("../assets/pieces/black_bishop.svg");
    --black-queen-image: url("../assets/pieces/black_queen.svg");
    --black-king-image: url("../assets/pieces/black_king.svg");

    /* For animation of piece movement */
    --move-from-left: 0;
    --move-from-top: 0;
    --move-to-left: 0;
    --move-to-top: 0;
}

/* -------------- Chessboard -------------- */
#chessboard {
    width: calc(var(--board-size) - 2px);
    height: calc(var(--board-size) - 2px);
    min-width: calc(var(--board-size) - 2px);
    min-height: calc(var(--board-size) - 2px);
    display:flex;
    flex-wrap: wrap;
    cursor: pointer!important;
    border: 2px solid #FFFFFFBB;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    position:relative;
    background-size: cover;
}

#chessboard::after{
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("../assets/images/chessboard-noise-effect.png");
    opacity: 0.4;
    filter: brightness(0);
    pointer-events: none;
}

/* -------------- Board Styles -------------- */
#chessboard {
    & .square{
        position: relative;
        width:calc((var(--board-size) - 2px) / 8);
        height:calc((var(--board-size) - 2px) / 8);
        box-shadow: inset 0 0 0 1px var(--square-shadow-color);
        text-align: center;
        margin:0!important;
        cursor: pointer!important;
    }

    & .square--black{
        background-color:var(--black-square-color);
    }

    & .square--white{
        background-color:var(--white-square-color);
    }

    & .row-coordinate{
        position:absolute;
        right:0;
        margin-right:0.4vw;
        font-size:calc(var(--board-size) / 50);
        margin-top:0.3vw;
        font-weight: bold;
    }

    & .square--black .row-coordinate{
        color:var(--white-square-color);
    }

    & .square--white .row-coordinate{
        color:var(--black-square-color);
    }

    & .column-coordinate{
        position:absolute;
        bottom:0;
        font-size:calc(var(--board-size) / 50);
        margin-left:0.4vw;
        margin-bottom:0.2vw;
        font-weight: bold;
    }

    & .square--black .column-coordinate{
        color:var(--white-square-color);
    }

    & .square--white .column-coordinate{
        color:var(--black-square-color);
    }
}

/* -------------- Piece Styles -------------- */
/* Generic piece style */
.piece{
    background-position: center;
    background-size:cover;
    background-repeat: no-repeat;
    width:calc(var(--board-size) / 9);
    height:calc(var(--board-size) / 10);
    position: absolute;
    z-index:99;
    left:5%;
    top:10%;
    cursor: pointer!important;

    &.dragging {
        opacity: 0.5;
    }

    &.promotion-option{
        z-index:999!important;
        position:inherit;
        background-color: var(--promotion-option-color);
        border-radius: 50%;
        margin-left: 5%;
        margin-top: 5%;
        width: calc(var(--board-size) / 10);
        height: calc(var(--board-size) / 11);
        outline: 5px solid var(--promotion-option-hover-color);

        &:hover{
            background-color: var(--promotion-option-hover-color);
        }
    }
}

/* Animation for piece movement, don't change this */
@keyframes move{
    0% {
        left:var(--move-from-left);
        top:var(--move-from-top);
    }
    100% {
        left:var(--move-to-left);
        top:var(--move-to-top);
    }
}

/* White pieces */
[data-piece="Rook"][data-color="White"]{
    background-image:var(--white-rook-image);
}

[data-piece="Knight"][data-color="White"]{
    background-image:var(--white-knight-image);
}

[data-piece="Bishop"][data-color="White"]{
    background-image:var(--white-bishop-image);
}

[data-piece="Queen"][data-color="White"]{
    background-image:var(--white-queen-image);
}

[data-piece="King"][data-color="White"]{
    background-image:var(--white-king-image);
}

[data-piece="Pawn"][data-color="White"]{
    background-image:var(--white-pawn-image);
}

/* Black pieces */
[data-piece="Rook"][data-color="Black"]{
    background-image:var(--black-rook-image);
}

[data-piece="Knight"][data-color="Black"]{
    background-image:var(--black-knight-image);
}

[data-piece="Bishop"][data-color="Black"]{
    background-image:var(--black-bishop-image);
}

[data-piece="Queen"][data-color="Black"]{
    background-image:var(--black-queen-image);
}

[data-piece="King"][data-color="Black"]{
    background-image:var(--black-king-image);
}

[data-piece="Pawn"][data-color="Black"]{
    background-image:var(--black-pawn-image);
}

/* -------------- Effects Styles -------------- */
#chessboard {
    & .square-effect-layer{
        position: absolute;
        width:calc((var(--board-size) - 2px) / 8);
        height:calc((var(--board-size) - 2px) / 8);
        box-shadow: inset 0 0 0 1px var(--square-shadow-color);
        text-align: center;
        margin:0!important;
        cursor: pointer!important;
        background-color: transparent;
        z-index: 100;
        pointer-events: auto;
    }

    & .square:has(
        .square-effect--playable .square-effect-layer:hover,
        .square-effect--killable .square-effect-layer:hover
    ){
        background-color: var(--hovering-color);
    }

    & .square:has(.square-effect--preplayable .square-effect-layer:hover){
        background-color: var(--prehovering-color);
    }

    & .square:has(.square-effect--selected .square-effect-layer){
        background-color: var(--selected-color);
    }

    & .square:has(.square-effect--preselected .square-effect-layer){
        background-color: var(--preselected-color);
    }

    & .square-effect--playable .square-effect-icon, 
    & .square-effect--preplayable .square-effect-icon{
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width:calc((var(--board-size) - 2px) / 23);
        height:calc((var(--board-size) - 2px) / 23);
        background-color: transparent;
        box-shadow: none;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }
    
    & .square-effect--playable .square-effect-icon{
        background-color: var(--playable-color)!important;
    }

    & .square-effect--preplayable .square-effect-icon{
        background-color: var(--preplayable-color)!important;
    }

    & .square-effect--killable .square-effect-icon::before, 
    & .square-effect--prekillable .square-effect-icon::before{
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width:calc((var(--board-size) - 2px) / 8);
        height:calc((var(--board-size) - 2px) / 8);
        background-color: transparent;
        box-shadow: none;
        transform: translate(-50%, -50%);
    }

    & .square-effect--killable .square-effect-icon::before{
        background-color: var(--killable-color);
    }

    & .square-effect--prekillable .square-effect-icon::before{
        background-color: var(--prekillable-color);
    }
    
    & .square-effect--killable .square-effect-icon::after,
    & .square-effect--prekillable .square-effect-icon::after{
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width:calc((var(--board-size) - 2px) / 8);
        height:calc((var(--board-size) - 2px) / 8);
        background-color: transparent;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    & .square--black .square-effect--killable .square-effect-icon::after,
    & .square--black .square-effect--prekillable .square-effect-icon::after{
        background-color: var(--black-square-color);
    }

    & .square--white .square-effect--killable .square-effect-icon::after,
    & .square--white .square-effect--prekillable .square-effect-icon::after{
        background-color: var(--white-square-color);
    }

    & .square:has(.square-effect--killable:hover) .square-effect-icon::after {
        background-color: var(--hovering-color);
    }

    & .square:has(.square-effect--prekillable:hover) .square-effect-icon::after {
        background-color: var(--prehovering-color);
    }

    & .square:has(.square-effect--checked .square-effect-layer){
        box-shadow:inset 0 0 15px var(--checked-color)!important;
    }
    
    & .square:has(.square-effect--disabled .square-effect-layer){
        box-shadow:inset 0 0 100px var(--disabled-color)!important;
    }

    & .square:has(.square-effect--from .square-effect-layer){
        box-shadow:inset 0 0 100px var(--from-color);
    }

    & .square:has(.square-effect--to .square-effect-layer){
        box-shadow:inset 0 0 100px var(--to-color);
    }

    & .square:has(.square-effect--selected .piece){
        opacity: 0.4;
    }

    & .square:has(.square-effect--selected span){
        opacity: 0.2;
    }
}


/** 
 * ------------------ Responsive ------------------- 
 *             700px - 900px - 1250px
 */
@media screen and (max-width: 900px) {
    :root{
        --board-size: calc(100vw - 5rem);
    }
}

@media screen and (max-width: 700px) {
    :root{
        --board-size: calc(100vw - 1.1rem);
    }
}